<!DOCTYPE html>
<html>

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Making runbooks more useful by exposing them through monitoring
    
  </title>

  <script type="application/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/hyde.css">
  <link rel="stylesheet" href="/css/custom.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-49052230-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>

  <body class="theme-base-09">
    <div class="container content">
      <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1 class="sidebar-myname">Samuel Toriel</h1>
      <p class="lead">A blog about Software and Operations</p>
    </div>

    <ul class="sidebar-nav">
      <br />
      <li class="sidebar-nav-item">
        <a href="/">Home</a>
      </li>
      <li class="sidebar-nav-item"><a href="/all_posts.html">All posts</a></li>
      <li class="sidebar-nav-item"><a href="/about.html">About</a></li>
      <li class="sidebar-nav-item"><a class="rs-nav-link" href="https://twitter.com/rilt" target="_new">@rilt</a></li>
      <li class="sidebar-nav-item" target="_new"><a href="https://github.com/riltsken">riltsken on github</a></li>
      <li class="sidebar-nav-item"><a href="/atom.xml">Atom Feed</a></li>
    </ul>
  </div>
</div>

      <!-- Main Content -->
      <div class="post">
  <h1 class="post-title">Making runbooks more useful by exposing them through monitoring</h1>
  <span class="post-date">19 Apr 2014</span>
  <p>In the <a href="/devops/infrastructure/2014/03/16/how-server-message-of-the-day-improved-our-devops-team.html">Server Message Of The Day (MOTD) post</a>, I mentioned the importance of sharing <a href="http://en.wikipedia.org/wiki/Tribal_knowledge">tribal knowledge</a> across teams on fixing infrastructure issues. When any of our monitoring alarms kick off, any team member should be equipped to take action on the alarm, but we operate with so many different technologies that no one person could possibly be an expert in all of them. Most operations teams create <a href="http://en.wikipedia.org/wiki/Runbook">runbooks</a> for common tasks, but we took it one step further and created runbooks for every alarm in our system. They don&#39;t exactly cover every possible reason for an alarm triggering, but will always help to provide context for someone that doesn&#39;t regularly deal with that subsystem.</p>

<p>Our runbooks are composed of the node&#39;s title and definition, its role in the system, and important config files. After that block is a section for all the system&#39;s monitoring alerts and what actions you can take to investigate or fix them. This is one of the runbooks for Cassandra:</p>

<p><img src="http://b7cc86bc05773bcecd41-4057535a55b255b6cbfb486a61b5692d.r49.cf1.rackcdn.com/node_description.png" alt="A description of the nodes role and configuration files">
<img src="http://b7cc86bc05773bcecd41-4057535a55b255b6cbfb486a61b5692d.r49.cf1.rackcdn.com/context_and_actions.png" alt="The actions we expect someone to take when initially debugging an issue when that alarm triggers"></p>

<h2>Triggered alarms link the runbook</h2>

<p>We use IRC for team communication since we&#39;re all distributed. The alerts will stream into the channel via bot with direct links to the runbooks and every triggered alarm. While we do have a proper escalation path through <a href="https://www.pagerduty.com/">PagerDuty</a>, this keeps the whole team aware of issues and gives anyone an easy path for investigation and action.</p>

<p><img src="http://b7cc86bc05773bcecd41-4057535a55b255b6cbfb486a61b5692d.r49.cf1.rackcdn.com/irc_example.png" alt="One of the ways people get notified of issues and a link to the runbook for what to do"></p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/softwaredevelopment/programming/hackathon/2014/04/22/vthacks-and-the-global-hackathon-community.html">
            VTHacks and why hackathons are essential for everyone
            <small>22 Apr 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/devops/infrastructure/logging/2014/03/25/multi-region-logging-architecture-with-logstash-and-kibana.html">
            Multi-region logging architecture with Logstash, Kibana, and ElasticSearch
            <small>25 Mar 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/devops/infrastructure/2014/03/16/how-server-message-of-the-day-improved-our-devops-team.html">
            How a server MOTD improved our DevOps team
            <small>16 Mar 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      <!-- Footer -->
      <div class="footer">
      </div>

    </div>
  </body>
</html>
